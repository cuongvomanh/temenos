version: '3.8'

services:
  oracle-db:
    container_name: oracle-ee
    # OFFICIAL IMAGE FOR ENTERPRISE EDITION
    # Note: You must accept the license and login via docker first
    image: container-registry.oracle.com/database/enterprise:latest
    ports:
      - "1521:1521"
    environment:
      - ORACLE_PWD=MySecurePassword123
      - ORACLE_SID=ORCLCDB         # Standard SID for Enterprise Edition
      - ORACLE_PDB=ORCLPDB1        # Standard PDB name
      # NOTE: The variables below (USER/TBSP) are NOT natively supported 
      # by the official EE image. You must use a startup script (see below).
      # - ORACLE_USER=TAFJ                 
      # - ORACLE_USER_PASSWORD=TAFJ        
      # - ORACLE_NEW_TBSP=T24DATA          
    volumes:
      # CRITICAL: Point to a NEW/EMPTY folder. You cannot reuse XE data for EE.
      - ./oracle_data:/opt/oracle/oradata
      # Mount a script to create your TAFJ user automatically on startup
      #- ./scripts/setup_user.sql:/opt/oracle/scripts/startup/01_setup_user.sql
    # Enterprise Edition requires significantly more shared memory
    shm_size: '4gb' 
    restart: unless-stopped